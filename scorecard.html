// Scoring System Module
const ScoringSystem = {
    state: {
        currentRound: 1,
        totalRounds: 3,
        scores: {
            red: [],
            blue: []
        },
        fighters: {
            red: '',
            blue: ''
        },
        event: ''
    },

    init() {
        this.bindElements();
        this.attachEventListeners();
        this.loadFromLocalStorage();
    },

    bindElements() {
        // Cache DOM elements
        this.elements = {
            form: document.getElementById('fightDetailsForm'),
            lockButton: document.getElementById('lockInButton'),
            // ... more element bindings
        };
    },

    attachEventListeners() {
        // Add event listeners with error handling
        try {
            this.elements.form.addEventListener('submit', (e) => {
                e.preventDefault();
                this.lockInFight();
            });
            // ... more event listeners
        } catch (error) {
            console.error('Error attaching event listeners:', error);
            // Show user-friendly error message
        }
    },

    calculateScore(damageValue, controlValue, defenseValue) {
        return {
            damage: damageValue * 0.5,
            control: controlValue * 0.3,
            defense: defenseValue * 0.2,
            total: (damageValue * 0.5) + (controlValue * 0.3) + (defenseValue * 0.2)
        };
    },

    // Add more methods for functionality

    saveToLocalStorage() {
        try {
            localStorage.setItem('scoringSystem', JSON.stringify(this.state));
        } catch (error) {
            console.error('Error saving to localStorage:', error);
        }
    },

    loadFromLocalStorage() {
        try {
            const saved = localStorage.getItem('scoringSystem');
            if (saved) {
                this.state = JSON.parse(saved);
                this.updateUI();
            }
        } catch (error) {
            console.error('Error loading from localStorage:', error);
        }
    }
};

// Initialize the scoring system
document.addEventListener('DOMContentLoaded', () => {
    ScoringSystem.init();
});
